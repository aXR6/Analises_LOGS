{% extends 'base.html' %}
{% block content %}
<h2 class="mb-4">Tr√°fego de Rede</h2>
<div id="net-list" class="list-group"></div>
<script>
async function fetchNetwork(page=1) {
  const resp = await fetch('/api/network?page=' + page);
  if (!resp.ok) return;
  const data = await resp.json();
  const list = document.getElementById('net-list');
  list.innerHTML = '';
  for (const row of data.events) {
    const item = document.createElement('div');
    item.className = 'list-group-item small';
    item.innerHTML = `
        <div><strong>ID:</strong> ${row[0]} - <strong>${row[1]}</strong></div>
        <div class="d-flex flex-wrap gap-2">
          <span><strong>Rotulo:</strong> ${row[3]}</span>
          <span><strong>Score:</strong> ${row[4].toFixed(2)}</span>
        </div>
        <div class="text-break">${row[2]}</div>`;
    list.appendChild(item);
  }
}
fetchNetwork();
setInterval(fetchNetwork, 5000);
</script>
{% endblock %}
