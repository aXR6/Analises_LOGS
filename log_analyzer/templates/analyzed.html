{% extends 'base.html' %}
{% block content %}
<h2 class="mb-4">Logs Analisados</h2>
<div class="table-responsive">
<table id="analyzed-table" class="table table-striped">
<thead>
<tr><th>ID Original</th><th>Timestamp</th><th>Programa</th><th>Severidade</th><th>Anomalia</th><th>Mensagem</th><th>Resumo</th></tr>
</thead>
<tbody></tbody>
</table>
</div>
<script>
async function fetchAnalyzed(page=1) {
  const resp = await fetch('/api/analyzed?page='+page);
  if (!resp.ok) return;
  const data = await resp.json();
  const tbody = document.querySelector('#analyzed-table tbody');
  tbody.innerHTML = '';
  for (const row of data.logs) {
    const tr = document.createElement('tr');
    tr.innerHTML = `
        <td>${row[0]}</td>
        <td>${row[1]}</td>
        <td>${row[3]}</td>
        <td>${row[6]}</td>
        <td>${row[7].toFixed(2)}</td>
        <td>${row[4]}</td>
        <td>${row[10]}</td>`;
    tbody.appendChild(tr);
  }
}
fetchAnalyzed();
</script>
{% endblock %}
